!function(a){function b(){a(document).unbind(".messager").bind("keydown.messager",function(b){if(27==b.keyCode)a("body").children("div.messager-window").children("div.messager-body").each(function(){a(this).dialog("close")});else if(9==b.keyCode){var c=a("body").children("div.messager-window");if(!c.length)return;for(var d=c.find(".messager-input,.messager-button .l-btn"),e=0;e<d.length;e++)if(a(d[e]).is(":focus"))return a(d[e>=d.length-1?0:e+1]).focus(),!1}else if(13==b.keyCode){var g=a(b.target).closest("input.messager-input");if(g.length){var h=g.closest(".messager-body");f(h,g.val())}}})}function c(){a(document).unbind(".messager")}function d(b){var c=a.extend({},a.messager.defaults,{modal:!1,shadow:!1,draggable:!1,resizable:!1,closed:!0,style:{left:"",top:"",right:0,zIndex:a.fn.window.defaults.zIndex++,bottom:-document.body.scrollTop-document.documentElement.scrollTop},title:"",width:250,height:100,minHeight:0,showType:"slide",showSpeed:600,content:b.msg,timeout:4e3},b),d=a('<div class="messager-body"></div>').appendTo("body");return d.dialog(a.extend({},c,{noheader:!c.title,openAnimation:c.showType,closeAnimation:"show"==c.showType?"hide":c.showType,openDuration:c.showSpeed,closeDuration:c.showSpeed,onOpen:function(){function a(){c.timeout>0&&(c.timer=setTimeout(function(){d.length&&d.data("dialog")&&d.dialog("close")},c.timeout))}d.dialog("dialog").hover(function(){c.timer&&clearTimeout(c.timer)},function(){a()}),a(),b.onOpen?b.onOpen.call(this):c.onOpen.call(this)},onClose:function(){c.timer&&clearTimeout(c.timer),b.onClose?b.onClose.call(this):c.onClose.call(this),d.dialog("destroy")}})),d.dialog("dialog").css(c.style),d.dialog("open"),d}function e(d){b();var e=a('<div class="messager-body"></div>').appendTo("body");return e.dialog(a.extend({},d,{noheader:!d.title,onClose:function(){c(),d.onClose&&d.onClose.call(this),setTimeout(function(){e.dialog("destroy")},100)}})),e.dialog("dialog").addClass("messager-window").find(".dialog-button").addClass("messager-button").find("a:first").focus(),e}function f(a,b){a.dialog("close"),a.dialog("options").fn(b)}a.messager={show:function(a){return d(a)},alert:function(b,c,d,g){var h="object"==typeof b?b:{title:b,msg:c,icon:d,fn:g},i=h.icon?"messager-icon messager-"+h.icon:"";h=a.extend({},a.messager.defaults,{content:'<div class="'+i+'"></div><div>'+h.msg+'</div><div style="clear:both;"/>'},h),h.buttons||(h.buttons=[{text:h.ok,onClick:function(){f(j)}}]);var j=e(h);return j},confirm:function(b,c,d){var g="object"==typeof b?b:{title:b,msg:c,fn:d};g=a.extend({},a.messager.defaults,{content:'<div class="messager-icon messager-question"></div><div>'+g.msg+'</div><div style="clear:both;"/>'},g),g.buttons||(g.buttons=[{text:g.ok,onClick:function(){f(h,!0)}},{text:g.cancel,onClick:function(){f(h,!1)}}]);var h=e(g);return h},prompt:function(b,c,d){var g="object"==typeof b?b:{title:b,msg:c,fn:d};g=a.extend({},a.messager.defaults,{content:'<div class="messager-icon messager-question"></div><div>'+g.msg+'</div><br/><div style="clear:both;"/><div><input class="messager-input" type="text"/></div>'},g),g.buttons||(g.buttons=[{text:g.ok,onClick:function(){f(h,h.find(".messager-input").val())}},{text:g.cancel,onClick:function(){f(h)}}]);var h=e(g);return h.find(".messager-input").focus(),h},progress:function(b){var c={bar:function(){return a("body>div.messager-window").find("div.messager-p-bar")},close:function(){var b=a("body>div.messager-window>div.messager-body:has(div.messager-progress)");b.length&&b.dialog("close")}};if("string"==typeof b){return(0,c[b])()}b=b||{};var d=a.extend({},{title:"",minHeight:0,content:void 0,msg:"",text:void 0,interval:300},b),f=e(a.extend({},a.messager.defaults,{content:'<div class="messager-progress"><div class="messager-p-msg">'+d.msg+'</div><div class="messager-p-bar"></div></div>',closable:!1,doSize:!1},d,{onClose:function(){this.timer&&clearInterval(this.timer),b.onClose?b.onClose.call(this):a.messager.defaults.onClose.call(this)}})),g=f.find("div.messager-p-bar");return g.progressbar({text:d.text}),f.dialog("resize"),d.interval&&(f[0].timer=setInterval(function(){var a=g.progressbar("getValue");a+=10,a>100&&(a=0),g.progressbar("setValue",a)},d.interval)),f}},a.messager.defaults=a.extend({},a.fn.dialog.defaults,{ok:"Ok",cancel:"Cancel",width:300,height:"auto",minHeight:150,modal:!0,collapsible:!1,minimizable:!1,maximizable:!1,resizable:!1,fn:function(){}})}(jQuery);