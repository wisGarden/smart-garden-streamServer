!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.SockJS=a()}}(function(){var a;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(require,module,exports){(function(a){"use strict";var b=require("./transport-list");module.exports=require("./main")(b),"_sockjs_onload"in a&&setTimeout(a._sockjs_onload,1)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./main":14,"./transport-list":16}],2:[function(require,module,exports){"use strict";function a(){c.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}var b=require("inherits"),c=require("./event");b(a,c),module.exports=a},{"./event":4,inherits:57}],3:[function(require,module,exports){"use strict";function a(){c.call(this)}var b=require("inherits"),c=require("./eventtarget");b(a,c),a.prototype.removeAllListeners=function(a){a?delete this._listeners[a]:this._listeners={}},a.prototype.once=function(a,b){function c(){d.removeListener(a,c),e||(e=!0,b.apply(this,arguments))}var d=this,e=!1;this.on(a,c)},a.prototype.emit=function(){var a=arguments[0],b=this._listeners[a];if(b){for(var c=arguments.length,d=new Array(c-1),e=1;e<c;e++)d[e-1]=arguments[e];for(var f=0;f<b.length;f++)b[f].apply(this,d)}},a.prototype.on=a.prototype.addListener=c.prototype.addEventListener,a.prototype.removeListener=c.prototype.removeEventListener,module.exports.EventEmitter=a},{"./eventtarget":5,inherits:57}],4:[function(require,module,exports){"use strict";function a(a){this.type=a}a.prototype.initEvent=function(a,b,c){return this.type=a,this.bubbles=b,this.cancelable=c,this.timeStamp=+new Date,this},a.prototype.stopPropagation=function(){},a.prototype.preventDefault=function(){},a.CAPTURING_PHASE=1,a.AT_TARGET=2,a.BUBBLING_PHASE=3,module.exports=a},{}],5:[function(require,module,exports){"use strict";function a(){this._listeners={}}a.prototype.addEventListener=function(a,b){a in this._listeners||(this._listeners[a]=[]);var c=this._listeners[a];-1===c.indexOf(b)&&(c=c.concat([b])),this._listeners[a]=c},a.prototype.removeEventListener=function(a,b){var c=this._listeners[a];if(c){var d=c.indexOf(b);return-1!==d?void(c.length>1?this._listeners[a]=c.slice(0,d).concat(c.slice(d+1)):delete this._listeners[a]):void 0}},a.prototype.dispatchEvent=function(){var a=arguments[0],b=a.type,c=1===arguments.length?[a]:Array.apply(null,arguments);if(this["on"+b]&&this["on"+b].apply(this,c),b in this._listeners)for(var d=this._listeners[b],e=0;e<d.length;e++)d[e].apply(this,c)},module.exports=a},{}],6:[function(require,module,exports){"use strict";function a(a){c.call(this),this.initEvent("message",!1,!1),this.data=a}var b=require("inherits"),c=require("./event");b(a,c),module.exports=a},{"./event":4,inherits:57}],7:[function(require,module,exports){"use strict";function a(a){this._transport=a,a.on("message",this._transportMessage.bind(this)),a.on("close",this._transportClose.bind(this))}var b=require("json3"),c=require("./utils/iframe");a.prototype._transportClose=function(a,d){c.postMessage("c",b.stringify([a,d]))},a.prototype._transportMessage=function(a){c.postMessage("t",a)},a.prototype._send=function(a){this._transport.send(a)},a.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},module.exports=a},{"./utils/iframe":47,json3:58}],8:[function(require,module,exports){(function(a){"use strict";var b=require("./utils/url"),c=require("./utils/event"),d=require("json3"),e=require("./facade"),f=require("./info-iframe-receiver"),g=require("./utils/iframe"),h=require("./location"),i=function(){};"production"!==a.env.NODE_ENV&&(i=require("debug")("sockjs-client:iframe-bootstrap")),module.exports=function(a,j){var k={};j.forEach(function(a){a.facadeTransport&&(k[a.facadeTransport.transportName]=a.facadeTransport)}),k[f.transportName]=f;var l;a.bootstrap_iframe=function(){var f;g.currentWindowId=h.hash.slice(1);var j=function(c){if(c.source===parent&&(void 0===l&&(l=c.origin),c.origin===l)){var j;try{j=d.parse(c.data)}catch(a){return void i("bad json",c.data)}if(j.windowId===g.currentWindowId)switch(j.type){case"s":var m;try{m=d.parse(j.data)}catch(a){i("bad json",j.data);break}var n=m[0],o=m[1],p=m[2],q=m[3];if(i(n,o,p,q),n!==a.version)throw new Error('Incompatible SockJS! Main site uses: "'+n+'", the iframe: "'+a.version+'".');if(!b.isOriginEqual(p,h.href)||!b.isOriginEqual(q,h.href))throw new Error("Can't connect to different domain from within an iframe. ("+h.href+", "+p+", "+q+")");f=new e(new k[o](p,q));break;case"m":f._send(j.data);break;case"c":f&&f._close(),f=null}}};c.attachEvent("message",j),g.postMessage("s")}}}).call(this,{env:{}})},{"./facade":7,"./info-iframe-receiver":10,"./location":13,"./utils/event":46,"./utils/iframe":47,"./utils/url":52,debug:54,json3:58}],9:[function(require,module,exports){(function(a){"use strict";function b(a,b){c.call(this);var d=this,h=+new Date;this.xo=new b("GET",a),this.xo.once("finish",function(a,b){var c,i;if(200===a){if(i=+new Date-h,b)try{c=e.parse(b)}catch(a){g("bad json",b)}f.isObject(c)||(c={})}d.emit("finish",c,i),d.removeAllListeners()})}var c=require("events").EventEmitter,d=require("inherits"),e=require("json3"),f=require("./utils/object"),g=function(){};"production"!==a.env.NODE_ENV&&(g=require("debug")("sockjs-client:info-ajax")),d(b,c),b.prototype.close=function(){this.removeAllListeners(),this.xo.close()},module.exports=b}).call(this,{env:{}})},{"./utils/object":49,debug:54,events:3,inherits:57,json3:58}],10:[function(require,module,exports){"use strict";function a(a){var b=this;c.call(this),this.ir=new f(a,e),this.ir.once("finish",function(a,c){b.ir=null,b.emit("message",d.stringify([a,c]))})}var b=require("inherits"),c=require("events").EventEmitter,d=require("json3"),e=require("./transport/sender/xhr-local"),f=require("./info-ajax");b(a,c),a.transportName="iframe-info-receiver",a.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},module.exports=a},{"./info-ajax":9,"./transport/sender/xhr-local":37,events:3,inherits:57,json3:58}],11:[function(require,module,exports){(function(a,b){"use strict";function c(a,c){var e=this;d.call(this);var k=function(){var b=e.ifr=new h(i.transportName,c,a);b.once("message",function(a){if(a){var b;try{b=f.parse(a)}catch(b){return j("bad json",a),e.emit("finish"),void e.close()}var c=b[0],d=b[1];e.emit("finish",c,d)}e.close()}),b.once("close",function(){e.emit("finish"),e.close()})};b.document.body?k():g.attachEvent("load",k)}var d=require("events").EventEmitter,e=require("inherits"),f=require("json3"),g=require("./utils/event"),h=require("./transport/iframe"),i=require("./info-iframe-receiver"),j=function(){};"production"!==a.env.NODE_ENV&&(j=require("debug")("sockjs-client:info-iframe")),e(c,d),c.enabled=function(){return h.enabled()},c.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},module.exports=c}).call(this,{env:{}},"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./info-iframe-receiver":10,"./transport/iframe":22,"./utils/event":46,debug:54,events:3,inherits:57,json3:58}],12:[function(require,module,exports){(function(a){"use strict";function b(a,b){l(a);var d=this;c.call(this),setTimeout(function(){d.doXhr(a,b)},0)}var c=require("events").EventEmitter,d=require("inherits"),e=require("./utils/url"),f=require("./transport/sender/xdr"),g=require("./transport/sender/xhr-cors"),h=require("./transport/sender/xhr-local"),i=require("./transport/sender/xhr-fake"),j=require("./info-iframe"),k=require("./info-ajax"),l=function(){};"production"!==a.env.NODE_ENV&&(l=require("debug")("sockjs-client:info-receiver")),d(b,c),b._getReceiver=function(a,b,c){return c.sameOrigin?new k(b,h):g.enabled?new k(b,g):f.enabled&&c.sameScheme?new k(b,f):j.enabled()?new j(a,b):new k(b,i)},b.prototype.doXhr=function(a,c){var d=this,f=e.addPath(a,"/info");l("doXhr",f),this.xo=b._getReceiver(a,f,c),this.timeoutRef=setTimeout(function(){l("timeout"),d._cleanup(!1),d.emit("finish")},b.timeout),this.xo.once("finish",function(a,b){l("finish",a,b),d._cleanup(!0),d.emit("finish",a,b)})},b.prototype._cleanup=function(a){l("_cleanup"),clearTimeout(this.timeoutRef),this.timeoutRef=null,!a&&this.xo&&this.xo.close(),this.xo=null},b.prototype.close=function(){l("close"),this.removeAllListeners(),this._cleanup(!1)},b.timeout=8e3,module.exports=b}).call(this,{env:{}})},{"./info-ajax":9,"./info-iframe":11,"./transport/sender/xdr":34,"./transport/sender/xhr-cors":35,"./transport/sender/xhr-fake":36,"./transport/sender/xhr-local":37,"./utils/url":52,debug:54,events:3,inherits:57}],13:[function(require,module,exports){(function(a){"use strict";module.exports=a.location||{origin:"http://localhost:80",protocol:"http",host:"localhost",port:80,href:"http://localhost/",hash:""}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],14:[function(require,module,exports){(function(a,b){"use strict";function c(a,b,d){if(!(this instanceof c))return new c(a,b,d);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");q.call(this),this.readyState=c.CONNECTING,this.extensions="",this.protocol="",d=d||{},d.protocols_whitelist&&o.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=d.transports,this._transportOptions=d.transportOptions||{};var f=d.sessionId||8;if("function"==typeof f)this._generateSessionId=f;else{if("number"!=typeof f)throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return h.string(f)}}this._server=d.server||h.numberString(1e3);var g=new e(a);if(!g.host||!g.protocol)throw new SyntaxError("The URL '"+a+"' is invalid");if(g.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==g.protocol&&"https:"!==g.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+g.protocol+"' is not allowed.");var i="https:"===g.protocol;if("https"===r.protocol&&!i)throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");b?Array.isArray(b)||(b=[b]):b=[];var k=b.sort();k.forEach(function(a,b){if(!a)throw new SyntaxError("The protocols entry '"+a+"' is invalid.");if(b<k.length-1&&a===k[b+1])throw new SyntaxError("The protocols entry '"+a+"' is duplicated.")});var l=j.getOrigin(r.href);this._origin=l?l.toLowerCase():null,g.set("pathname",g.pathname.replace(/\/+$/,"")),this.url=g.href,v("using url",this.url),this._urlInfo={nullOrigin:!n.hasDomain(),sameOrigin:j.isOriginEqual(this.url,r.href),sameScheme:j.isSchemeEqual(this.url,r.href)},this._ir=new u(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function d(a){return 1e3===a||a>=3e3&&a<=4999}require("./shims");var e=require("url-parse"),f=require("inherits"),g=require("json3"),h=require("./utils/random"),i=require("./utils/escape"),j=require("./utils/url"),k=require("./utils/event"),l=require("./utils/transport"),m=require("./utils/object"),n=require("./utils/browser"),o=require("./utils/log"),p=require("./event/event"),q=require("./event/eventtarget"),r=require("./location"),s=require("./event/close"),t=require("./event/trans-message"),u=require("./info-receiver"),v=function(){};"production"!==a.env.NODE_ENV&&(v=require("debug")("sockjs-client:main"));var w;f(c,q),c.prototype.close=function(a,b){if(a&&!d(a))throw new Error("InvalidAccessError: Invalid code");if(b&&b.length>123)throw new SyntaxError("reason argument has an invalid length");if(this.readyState!==c.CLOSING&&this.readyState!==c.CLOSED){this._close(a||1e3,b||"Normal closure",!0)}},c.prototype.send=function(a){if("string"!=typeof a&&(a=""+a),this.readyState===c.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===c.OPEN&&this._transport.send(i.quote(a))},c.version=require("./version"),c.CONNECTING=0,c.OPEN=1,c.CLOSING=2,c.CLOSED=3,c.prototype._receiveInfo=function(a,b){if(v("_receiveInfo",b),this._ir=null,!a)return void this._close(1002,"Cannot connect to server");this._rto=this.countRTO(b),this._transUrl=a.base_url?a.base_url:this.url,a=m.extend(a,this._urlInfo),v("info",a);var c=w.filterToEnabled(this._transportsWhitelist,a);this._transports=c.main,v(this._transports.length+" enabled transports"),this._connect()},c.prototype._connect=function(){for(var a=this._transports.shift();a;a=this._transports.shift()){if(v("attempt",a.transportName),a.needBody&&(!b.document.body||void 0!==b.document.readyState&&"complete"!==b.document.readyState&&"interactive"!==b.document.readyState))return v("waiting for body"),this._transports.unshift(a),void k.attachEvent("load",this._connect.bind(this));var c=this._rto*a.roundTrips||5e3;this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),c),v("using timeout",c);var d=j.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),e=this._transportOptions[a.transportName];v("transport url",d);var f=new a(d,this._transUrl,e);return f.on("message",this._transportMessage.bind(this)),f.once("close",this._transportClose.bind(this)),f.transportName=a.transportName,void(this._transport=f)}this._close(2e3,"All transports failed",!1)},c.prototype._transportTimeout=function(){v("_transportTimeout"),this.readyState===c.CONNECTING&&this._transportClose(2007,"Transport timed out")},c.prototype._transportMessage=function(a){v("_transportMessage",a);var b,c=this,d=a.slice(0,1),e=a.slice(1);switch(d){case"o":return void this._open();case"h":return this.dispatchEvent(new p("heartbeat")),void v("heartbeat",this.transport)}if(e)try{b=g.parse(e)}catch(a){v("bad json",e)}if(void 0===b)return void v("empty payload",e);switch(d){case"a":Array.isArray(b)&&b.forEach(function(a){v("message",c.transport,a),c.dispatchEvent(new t(a))});break;case"m":v("message",this.transport,b),this.dispatchEvent(new t(b));break;case"c":Array.isArray(b)&&2===b.length&&this._close(b[0],b[1],!0)}},c.prototype._transportClose=function(a,b){if(v("_transportClose",this.transport,a,b),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),!d(a)&&2e3!==a&&this.readyState===c.CONNECTING)return void this._connect();this._close(a,b)},c.prototype._open=function(){v("_open",this._transport.transportName,this.readyState),this.readyState===c.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=c.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new p("open")),v("connected",this.transport)):this._close(1006,"Server lost session")},c.prototype._close=function(a,b,d){v("_close",this.transport,a,b,d,this.readyState);var e=!1;if(this._ir&&(e=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===c.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=c.CLOSING,setTimeout(function(){this.readyState=c.CLOSED,e&&this.dispatchEvent(new p("error"));var f=new s("close");f.wasClean=d||!1,f.code=a||1e3,f.reason=b,this.dispatchEvent(f),this.onmessage=this.onclose=this.onerror=null,v("disconnected")}.bind(this),0)},c.prototype.countRTO=function(a){return a>100?4*a:300+a},module.exports=function(a){return w=l(a),require("./iframe-bootstrap")(c,a),c}}).call(this,{env:{}},"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./event/close":2,"./event/event":4,"./event/eventtarget":5,"./event/trans-message":6,"./iframe-bootstrap":8,"./info-receiver":12,"./location":13,"./shims":15,"./utils/browser":44,"./utils/escape":45,"./utils/event":46,"./utils/log":48,"./utils/object":49,"./utils/random":50,"./utils/transport":51,"./utils/url":52,"./version":53,debug:54,inherits:57,json3:58,"url-parse":59}],15:[function(require,module,exports){"use strict";function a(a){var b=+a;return b!==b?b=0:0!==b&&b!==1/0&&b!==-1/0&&(b=(b>0||-1)*Math.floor(Math.abs(b))),b}function b(a){return a>>>0}function c(){}var d,e=Array.prototype,f=Object.prototype,g=Function.prototype,h=String.prototype,i=e.slice,j=f.toString,k=function(a){return"[object Function]"===f.toString.call(a)},l=function(a){return"[object Array]"===j.call(a)},m=function(a){return"[object String]"===j.call(a)},n=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(a){return!1}}();d=n?function(a,b,c,d){!d&&b in a||Object.defineProperty(a,b,{configurable:!0,enumerable:!1,writable:!0,value:c})}:function(a,b,c,d){!d&&b in a||(a[b]=c)};var o=function(a,b,c){for(var e in b)f.hasOwnProperty.call(b,e)&&d(a,e,b[e],c)},p=function(a){if(null==a)throw new TypeError("can't convert "+a+" to object");return Object(a)};o(g,{bind:function(a){var b=this;if(!k(b))throw new TypeError("Function.prototype.bind called on incompatible "+b);for(var d=i.call(arguments,1),e=function(){if(this instanceof j){var c=b.apply(this,d.concat(i.call(arguments)));return Object(c)===c?c:this}return b.apply(a,d.concat(i.call(arguments)))},f=Math.max(0,b.length-d.length),g=[],h=0;h<f;h++)g.push("$"+h);var j=Function("binder","return function ("+g.join(",")+"){ return binder.apply(this, arguments); }")(e);return b.prototype&&(c.prototype=b.prototype,j.prototype=new c,c.prototype=null),j}}),o(Array,{isArray:l});var q=Object("a"),r="a"!==q[0]||!(0 in q);o(e,{forEach:function(a){var b=p(this),c=r&&m(this)?this.split(""):b,d=arguments[1],e=-1,f=c.length>>>0;if(!k(a))throw new TypeError;for(;++e<f;)e in c&&a.call(d,c[e],e,b)}},!function(a){var b=!0,c=!0;return a&&(a.call("foo",function(a,c,d){"object"!=typeof d&&(b=!1)}),a.call([1],function(){c="string"==typeof this},"x")),!!a&&b&&c}(e.forEach));var s=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);o(e,{indexOf:function(b){var c=r&&m(this)?this.split(""):p(this),d=c.length>>>0;if(!d)return-1;var e=0;for(arguments.length>1&&(e=a(arguments[1])),e=e>=0?e:Math.max(0,d+e);e<d;e++)if(e in c&&c[e]===b)return e;return-1}},s);var t=h.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?function(){var a=void 0===/()??/.exec("")[1];h.split=function(c,d){var f=this;if(void 0===c&&0===d)return[];if("[object RegExp]"!==j.call(c))return t.call(this,c,d);var g,h,i,k,l=[],m=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.extended?"x":"")+(c.sticky?"y":""),n=0;for(c=new RegExp(c.source,m+"g"),f+="",a||(g=new RegExp("^"+c.source+"$(?!\\s)",m)),d=void 0===d?-1>>>0:b(d);(h=c.exec(f))&&!((i=h.index+h[0].length)>n&&(l.push(f.slice(n,h.index)),!a&&h.length>1&&h[0].replace(g,function(){for(var a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(h[a]=void 0)}),h.length>1&&h.index<f.length&&e.push.apply(l,h.slice(1)),k=h[0].length,n=i,l.length>=d));)c.lastIndex===h.index&&c.lastIndex++;return n===f.length?!k&&c.test("")||l.push(""):l.push(f.slice(n)),l.length>d?l.slice(0,d):l}}():"0".split(void 0,0).length&&(h.split=function(a,b){return void 0===a&&0===b?[]:t.call(this,a,b)});var u="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",v="​",w="["+u+"]",x=new RegExp("^"+w+w+"*"),y=new RegExp(w+w+"*$"),z=h.trim&&(u.trim()||!v.trim());o(h,{trim:function(){if(void 0===this||null===this)throw new TypeError("can't convert "+this+" to object");return String(this).replace(x,"").replace(y,"")}},z);var A=h.substr,B="".substr&&"b"!=="0b".substr(-1);o(h,{substr:function(a,b){return A.call(this,a<0&&(a=this.length+a)<0?0:a,b)}},B)},{}],16:[function(require,module,exports){"use strict";module.exports=[require("./transport/websocket"),require("./transport/xhr-streaming"),require("./transport/xdr-streaming"),require("./transport/eventsource"),require("./transport/lib/iframe-wrap")(require("./transport/eventsource")),require("./transport/htmlfile"),require("./transport/lib/iframe-wrap")(require("./transport/htmlfile")),require("./transport/xhr-polling"),require("./transport/xdr-polling"),require("./transport/lib/iframe-wrap")(require("./transport/xhr-polling")),require("./transport/jsonp-polling")]},{"./transport/eventsource":20,"./transport/htmlfile":21,"./transport/jsonp-polling":23,"./transport/lib/iframe-wrap":26,"./transport/websocket":38,"./transport/xdr-polling":39,"./transport/xdr-streaming":40,"./transport/xhr-polling":41,"./transport/xhr-streaming":42}],17:[function(require,module,exports){(function(a,b){"use strict";function c(a,b,c,e){i(a,b);var f=this;d.call(this),setTimeout(function(){f._start(a,b,c,e)},0)}var d=require("events").EventEmitter,e=require("inherits"),f=require("../../utils/event"),g=require("../../utils/url"),h=b.XMLHttpRequest,i=function(){};"production"!==a.env.NODE_ENV&&(i=require("debug")("sockjs-client:browser:xhr")),e(c,d),c.prototype._start=function(a,b,d,e){var j=this;try{this.xhr=new h}catch(a){}if(!this.xhr)return i("no xhr"),this.emit("finish",0,"no xhr support"),void this._cleanup();b=g.addQuery(b,"t="+ +new Date),this.unloadRef=f.unloadAdd(function(){i("unload cleanup"),j._cleanup(!0)});try{this.xhr.open(a,b,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){i("xhr timeout"),j.emit("finish",0,""),j._cleanup(!1)})}catch(a){return i("exception",a),this.emit("finish",0,""),void this._cleanup(!1)}if(e&&e.noCredentials||!c.supportsCORS||(i("withCredentials"),this.xhr.withCredentials="true"),e&&e.headers)for(var k in e.headers)this.xhr.setRequestHeader(k,e.headers[k]);this.xhr.onreadystatechange=function(){if(j.xhr){var a,b,c=j.xhr;switch(i("readyState",c.readyState),c.readyState){case 3:try{b=c.status,a=c.responseText}catch(a){}i("status",b),1223===b&&(b=204),200===b&&a&&a.length>0&&(i("chunk"),j.emit("chunk",b,a));break;case 4:b=c.status,i("status",b),1223===b&&(b=204),12005!==b&&12029!==b||(b=0),i("finish",b,c.responseText),j.emit("finish",b,c.responseText),j._cleanup(!1)}}};try{j.xhr.send(d)}catch(a){j.emit("finish",0,""),j._cleanup(!1)}},c.prototype._cleanup=function(a){if(i("cleanup"),this.xhr){if(this.removeAllListeners(),f.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),a)try{this.xhr.abort()}catch(a){}this.unloadRef=this.xhr=null}},c.prototype.close=function(){i("close"),this._cleanup(!0)},c.enabled=!!h;var j=["Active"].concat("Object").join("X");!c.enabled&&j in b&&(i("overriding xmlhttprequest"),h=function(){try{return new b[j]("Microsoft.XMLHTTP")}catch(a){return null}},c.enabled=!!new h);var k=!1;try{k="withCredentials"in new h}catch(a){}c.supportsCORS=k,module.exports=c}).call(this,{env:{}},"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/event":46,"../../utils/url":52,debug:54,events:3,inherits:57}],18:[function(require,module,exports){(function(a){module.exports=a.EventSource}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],19:[function(require,module,exports){(function(a){"use strict";var b=a.WebSocket||a.MozWebSocket;b&&(module.exports=function(a){return new b(a)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],20:[function(require,module,exports){"use strict";function a(b){if(!a.enabled())throw new Error("Transport created when disabled");c.call(this,b,"/eventsource",d,e)}var b=require("inherits"),c=require("./lib/ajax-based"),d=require("./receiver/eventsource"),e=require("./sender/xhr-cors"),f=require("eventsource");b(a,c),a.enabled=function(){return!!f},a.transportName="eventsource",a.roundTrips=2,module.exports=a},{"./lib/ajax-based":24,"./receiver/eventsource":29,"./sender/xhr-cors":35,eventsource:18,inherits:57}],21:[function(require,module,exports){"use strict";function a(a){if(!c.enabled)throw new Error("Transport created when disabled");e.call(this,a,"/htmlfile",c,d)}var b=require("inherits"),c=require("./receiver/htmlfile"),d=require("./sender/xhr-local"),e=require("./lib/ajax-based");b(a,e),a.enabled=function(a){return c.enabled&&a.sameOrigin},a.transportName="htmlfile",a.roundTrips=2,module.exports=a},{"./lib/ajax-based":24,"./receiver/htmlfile":30,"./sender/xhr-local":37,inherits:57}],22:[function(require,module,exports){(function(a){"use strict";function b(a,c,d){if(!b.enabled())throw new Error("Transport created when disabled");e.call(this);var f=this;this.origin=g.getOrigin(d),this.baseUrl=d,this.transUrl=c,this.transport=a,this.windowId=j.string(8);var l=g.addPath(d,"/iframe.html")+"#"+this.windowId;k(a,c,l),this.iframeObj=h.createIframe(l,function(a){k("err callback"),f.emit("close",1006,"Unable to load an iframe ("+a+")"),f.close()}),this.onmessageCallback=this._message.bind(this),i.attachEvent("message",this.onmessageCallback)}var c=require("inherits"),d=require("json3"),e=require("events").EventEmitter,f=require("../version"),g=require("../utils/url"),h=require("../utils/iframe"),i=require("../utils/event"),j=require("../utils/random"),k=function(){};"production"!==a.env.NODE_ENV&&(k=require("debug")("sockjs-client:transport:iframe")),c(b,e),b.prototype.close=function(){if(k("close"),this.removeAllListeners(),this.iframeObj){i.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(a){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},b.prototype._message=function(a){if(k("message",a.data),!g.isOriginEqual(a.origin,this.origin))return void k("not same origin",a.origin,this.origin);var b;try{b=d.parse(a.data)}catch(b){return void k("bad json",a.data)}if(b.windowId!==this.windowId)return void k("mismatched window id",b.windowId,this.windowId);switch(b.type){case"s":this.iframeObj.loaded(),this.postMessage("s",d.stringify([f,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",b.data);break;case"c":var c;try{c=d.parse(b.data)}catch(a){return void k("bad json",b.data)}this.emit("close",c[0],c[1]),this.close()}},b.prototype.postMessage=function(a,b){k("postMessage",a,b),this.iframeObj.post(d.stringify({windowId:this.windowId,type:a,data:b||""}),this.origin)},b.prototype.send=function(a){k("send",a),this.postMessage("m",a)},b.enabled=function(){return h.iframeEnabled},b.transportName="iframe",b.roundTrips=2,module.exports=b}).call(this,{env:{}})},{"../utils/event":46,"../utils/iframe":47,"../utils/random":50,"../utils/url":52,"../version":53,debug:54,events:3,inherits:57,json3:58}],23:[function(require,module,exports){(function(a){"use strict";function b(a){if(!b.enabled())throw new Error("Transport created when disabled");d.call(this,a,"/jsonp",f,e)}var c=require("inherits"),d=require("./lib/sender-receiver"),e=require("./receiver/jsonp"),f=require("./sender/jsonp");c(b,d),b.enabled=function(){return!!a.document},b.transportName="jsonp-polling",b.roundTrips=1,b.needBody=!0,module.exports=b}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/sender-receiver":28,"./receiver/jsonp":31,"./sender/jsonp":33,inherits:57}],24:[function(require,module,exports){(function(a){"use strict";function b(a){return function(b,c,d){g("create ajax sender",b,c);var f={};"string"==typeof c&&(f.headers={"Content-type":"text/plain"});var h=e.addPath(b,"/xhr_send"),i=new a("POST",h,c,f);return i.once("finish",function(a){if(g("finish",a),i=null,200!==a&&204!==a)return d(new Error("http status "+a));d()}),function(){g("abort"),i.close(),i=null;var a=new Error("Aborted");a.code=1e3,d(a)}}}function c(a,c,d,e){f.call(this,a,c,b(e),d,e)}var d=require("inherits"),e=require("../../utils/url"),f=require("./sender-receiver"),g=function(){};"production"!==a.env.NODE_ENV&&(g=require("debug")("sockjs-client:ajax-based")),d(c,f),module.exports=c}).call(this,{env:{}})},{"../../utils/url":52,"./sender-receiver":28,debug:54,inherits:57}],25:[function(require,module,exports){(function(a){"use strict";function b(a,b){e(a),d.call(this),this.sendBuffer=[],this.sender=b,this.url=a}var c=require("inherits"),d=require("events").EventEmitter,e=function(){};"production"!==a.env.NODE_ENV&&(e=require("debug")("sockjs-client:buffered-sender")),c(b,d),b.prototype.send=function(a){e("send",a),this.sendBuffer.push(a),this.sendStop||this.sendSchedule()},b.prototype.sendScheduleWait=function(){e("sendScheduleWait");var a,b=this;this.sendStop=function(){e("sendStop"),b.sendStop=null,clearTimeout(a)},a=setTimeout(function(){e("timeout"),b.sendStop=null,b.sendSchedule()},25)},b.prototype.sendSchedule=function(){e("sendSchedule",this.sendBuffer.length);var a=this;if(this.sendBuffer.length>0){var b="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,b,function(b){a.sendStop=null,b?(e("error",b),a.emit("close",b.code||1006,"Sending error: "+b),a._cleanup()):a.sendScheduleWait()}),this.sendBuffer=[]}},b.prototype._cleanup=function(){e("_cleanup"),this.removeAllListeners()},b.prototype.stop=function(){e("stop"),this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},module.exports=b}).call(this,{env:{}})},{debug:54,events:3,inherits:57}],26:[function(require,module,exports){(function(a){"use strict";var b=require("inherits"),c=require("../iframe"),d=require("../../utils/object");module.exports=function(e){function f(a,b){c.call(this,e.transportName,a,b)}return b(f,c),f.enabled=function(b,f){if(!a.document)return!1;var g=d.extend({},f);return g.sameOrigin=!0,e.enabled(g)&&c.enabled()},f.transportName="iframe-"+e.transportName,f.needBody=!0,f.roundTrips=c.roundTrips+e.roundTrips-1,f.facadeTransport=e,f}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/object":49,"../iframe":22,inherits:57}],27:[function(require,module,exports){(function(a){"use strict";function b(a,b,c){e(b),d.call(this),this.Receiver=a,this.receiveUrl=b,this.AjaxObject=c,this._scheduleReceiver()}var c=require("inherits"),d=require("events").EventEmitter,e=function(){};"production"!==a.env.NODE_ENV&&(e=require("debug")("sockjs-client:polling")),c(b,d),b.prototype._scheduleReceiver=function(){e("_scheduleReceiver");var a=this,b=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);b.on("message",function(b){e("message",b),a.emit("message",b)}),b.once("close",function(c,d){e("close",c,d,a.pollIsClosing),a.poll=b=null,a.pollIsClosing||("network"===d?a._scheduleReceiver():(a.emit("close",c||1006,d),a.removeAllListeners()))})},b.prototype.abort=function(){e("abort"),this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},module.exports=b}).call(this,{env:{}})},{debug:54,events:3,inherits:57}],28:[function(require,module,exports){(function(a){"use strict";function b(a,b,c,h,i){var j=d.addPath(a,b);g(j);var k=this;e.call(this,a,c),this.poll=new f(h,j,i),this.poll.on("message",function(a){g("poll message",a),k.emit("message",a)}),this.poll.once("close",function(a,b){g("poll close",a,b),k.poll=null,k.emit("close",a,b),k.close()})}var c=require("inherits"),d=require("../../utils/url"),e=require("./buffered-sender"),f=require("./polling"),g=function(){}
;"production"!==a.env.NODE_ENV&&(g=require("debug")("sockjs-client:sender-receiver")),c(b,e),b.prototype.close=function(){g("close"),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null),this.stop()},module.exports=b}).call(this,{env:{}})},{"../../utils/url":52,"./buffered-sender":25,"./polling":27,debug:54,inherits:57}],29:[function(require,module,exports){(function(a){"use strict";function b(a){f(a),d.call(this);var b=this,c=this.es=new e(a);c.onmessage=function(a){f("message",a.data),b.emit("message",decodeURI(a.data))},c.onerror=function(a){f("error",c.readyState,a);var d=2!==c.readyState?"network":"permanent";b._cleanup(),b._close(d)}}var c=require("inherits"),d=require("events").EventEmitter,e=require("eventsource"),f=function(){};"production"!==a.env.NODE_ENV&&(f=require("debug")("sockjs-client:receiver:eventsource")),c(b,d),b.prototype.abort=function(){f("abort"),this._cleanup(),this._close("user")},b.prototype._cleanup=function(){f("cleanup");var a=this.es;a&&(a.onmessage=a.onerror=null,a.close(),this.es=null)},b.prototype._close=function(a){f("close",a);var b=this;setTimeout(function(){b.emit("close",null,a),b.removeAllListeners()},200)},module.exports=b}).call(this,{env:{}})},{debug:54,events:3,eventsource:18,inherits:57}],30:[function(require,module,exports){(function(a,b){"use strict";function c(a){i(a),g.call(this);var d=this;e.polluteGlobalNamespace(),this.id="a"+h.string(6),a=f.addQuery(a,"c="+decodeURIComponent(e.WPrefix+"."+this.id)),i("using htmlfile",c.htmlfileEnabled);var j=c.htmlfileEnabled?e.createHtmlfile:e.createIframe;b[e.WPrefix][this.id]={start:function(){i("start"),d.iframeObj.loaded()},message:function(a){i("message",a),d.emit("message",a)},stop:function(){i("stop"),d._cleanup(),d._close("network")}},this.iframeObj=j(a,function(){i("callback"),d._cleanup(),d._close("permanent")})}var d=require("inherits"),e=require("../../utils/iframe"),f=require("../../utils/url"),g=require("events").EventEmitter,h=require("../../utils/random"),i=function(){};"production"!==a.env.NODE_ENV&&(i=require("debug")("sockjs-client:receiver:htmlfile")),d(c,g),c.prototype.abort=function(){i("abort"),this._cleanup(),this._close("user")},c.prototype._cleanup=function(){i("_cleanup"),this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete b[e.WPrefix][this.id]},c.prototype._close=function(a){i("_close",a),this.emit("close",null,a),this.removeAllListeners()},c.htmlfileEnabled=!1;var j=["Active"].concat("Object").join("X");if(j in b)try{c.htmlfileEnabled=!!new b[j]("htmlfile")}catch(a){}c.enabled=c.htmlfileEnabled||e.iframeEnabled,module.exports=c}).call(this,{env:{}},"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,debug:54,events:3,inherits:57}],31:[function(require,module,exports){(function(a,b){"use strict";function c(a){j(a);var f=this;i.call(this),d.polluteGlobalNamespace(),this.id="a"+e.string(6);var h=g.addQuery(a,"c="+encodeURIComponent(d.WPrefix+"."+this.id));b[d.WPrefix][this.id]=this._callback.bind(this),this._createScript(h),this.timeoutId=setTimeout(function(){j("timeout"),f._abort(new Error("JSONP script loaded abnormally (timeout)"))},c.timeout)}var d=require("../../utils/iframe"),e=require("../../utils/random"),f=require("../../utils/browser"),g=require("../../utils/url"),h=require("inherits"),i=require("events").EventEmitter,j=function(){};"production"!==a.env.NODE_ENV&&(j=require("debug")("sockjs-client:receiver:jsonp")),h(c,i),c.prototype.abort=function(){if(j("abort"),b[d.WPrefix][this.id]){var a=new Error("JSONP user aborted read");a.code=1e3,this._abort(a)}},c.timeout=35e3,c.scriptErrorTimeout=1e3,c.prototype._callback=function(a){j("_callback",a),this._cleanup(),this.aborting||(a&&(j("message",a),this.emit("message",a)),this.emit("close",null,"network"),this.removeAllListeners())},c.prototype._abort=function(a){j("_abort",a),this._cleanup(),this.aborting=!0,this.emit("close",a.code,a.message),this.removeAllListeners()},c.prototype._cleanup=function(){if(j("_cleanup"),clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var a=this.script;a.parentNode.removeChild(a),a.onreadystatechange=a.onerror=a.onload=a.onclick=null,this.script=null}delete b[d.WPrefix][this.id]},c.prototype._scriptError=function(){j("_scriptError");var a=this;this.errorTimer||(this.errorTimer=setTimeout(function(){a.loadedOkay||a._abort(new Error("JSONP script loaded abnormally (onerror)"))},c.scriptErrorTimeout))},c.prototype._createScript=function(a){j("_createScript",a);var c,d=this,g=this.script=b.document.createElement("script");if(g.id="a"+e.string(8),g.src=a,g.type="text/javascript",g.charset="UTF-8",g.onerror=this._scriptError.bind(this),g.onload=function(){j("onload"),d._abort(new Error("JSONP script loaded abnormally (onload)"))},g.onreadystatechange=function(){if(j("onreadystatechange",g.readyState),/loaded|closed/.test(g.readyState)){if(g&&g.htmlFor&&g.onclick){d.loadedOkay=!0;try{g.onclick()}catch(a){}}g&&d._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},void 0===g.async&&b.document.attachEvent)if(f.isOpera())c=this.script2=b.document.createElement("script"),c.text="try{var a = document.getElementById('"+g.id+"'); if(a)a.onerror();}catch(x){};",g.async=c.async=!1;else{try{g.htmlFor=g.id,g.event="onclick"}catch(a){}g.async=!0}void 0!==g.async&&(g.async=!0);var h=b.document.getElementsByTagName("head")[0];h.insertBefore(g,h.firstChild),c&&h.insertBefore(c,h.firstChild)},module.exports=c}).call(this,{env:{}},"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/browser":44,"../../utils/iframe":47,"../../utils/random":50,"../../utils/url":52,debug:54,events:3,inherits:57}],32:[function(require,module,exports){(function(a){"use strict";function b(a,b){e(a),d.call(this);var c=this;this.bufferPosition=0,this.xo=new b("POST",a,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(a,b){e("finish",a,b),c._chunkHandler(a,b),c.xo=null;var d=200===a?"network":"permanent";e("close",d),c.emit("close",null,d),c._cleanup()})}var c=require("inherits"),d=require("events").EventEmitter,e=function(){};"production"!==a.env.NODE_ENV&&(e=require("debug")("sockjs-client:receiver:xhr")),c(b,d),b.prototype._chunkHandler=function(a,b){if(e("_chunkHandler",a),200===a&&b)for(var c=-1;;this.bufferPosition+=c+1){var d=b.slice(this.bufferPosition);if(-1===(c=d.indexOf("\n")))break;var f=d.slice(0,c);f&&(e("message",f),this.emit("message",f))}},b.prototype._cleanup=function(){e("_cleanup"),this.removeAllListeners()},b.prototype.abort=function(){e("abort"),this.xo&&(this.xo.close(),e("close"),this.emit("close",null,"user"),this.xo=null),this._cleanup()},module.exports=b}).call(this,{env:{}})},{debug:54,events:3,inherits:57}],33:[function(require,module,exports){(function(a,b){"use strict";function c(a){g("createIframe",a);try{return b.document.createElement('<iframe name="'+a+'">')}catch(d){var c=b.document.createElement("iframe");return c.name=a,c}}function d(){g("createForm"),h=b.document.createElement("form"),h.style.display="none",h.style.position="absolute",h.method="POST",h.enctype="application/x-www-form-urlencoded",h.acceptCharset="UTF-8",i=b.document.createElement("textarea"),i.name="d",h.appendChild(i),b.document.body.appendChild(h)}var e=require("../../utils/random"),f=require("../../utils/url"),g=function(){};"production"!==a.env.NODE_ENV&&(g=require("debug")("sockjs-client:sender:jsonp"));var h,i;module.exports=function(a,b,j){g(a,b),h||d();var k="a"+e.string(8);h.target=k,h.action=f.addQuery(f.addPath(a,"/jsonp_send"),"i="+k);var l=c(k);l.id=k,l.style.display="none",h.appendChild(l);try{i.value=b}catch(a){}h.submit();var m=function(a){g("completed",k,a),l.onerror&&(l.onreadystatechange=l.onerror=l.onload=null,setTimeout(function(){g("cleaning up",k),l.parentNode.removeChild(l),l=null},500),i.value="",j(a))};return l.onerror=function(){g("onerror",k),m()},l.onload=function(){g("onload",k),m()},l.onreadystatechange=function(a){g("onreadystatechange",k,l.readyState,a),"complete"===l.readyState&&m()},function(){g("aborted",k),m(new Error("Aborted"))}}}).call(this,{env:{}},"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/random":50,"../../utils/url":52,debug:54}],34:[function(require,module,exports){(function(a,b){"use strict";function c(a,b,c){i(a,b);var e=this;d.call(this),setTimeout(function(){e._start(a,b,c)},0)}var d=require("events").EventEmitter,e=require("inherits"),f=require("../../utils/event"),g=require("../../utils/browser"),h=require("../../utils/url"),i=function(){};"production"!==a.env.NODE_ENV&&(i=require("debug")("sockjs-client:sender:xdr")),e(c,d),c.prototype._start=function(a,c,d){i("_start");var e=this,g=new b.XDomainRequest;c=h.addQuery(c,"t="+ +new Date),g.onerror=function(){i("onerror"),e._error()},g.ontimeout=function(){i("ontimeout"),e._error()},g.onprogress=function(){i("progress",g.responseText),e.emit("chunk",200,g.responseText)},g.onload=function(){i("load"),e.emit("finish",200,g.responseText),e._cleanup(!1)},this.xdr=g,this.unloadRef=f.unloadAdd(function(){e._cleanup(!0)});try{this.xdr.open(a,c),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(d)}catch(a){this._error()}},c.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},c.prototype._cleanup=function(a){if(i("cleanup",a),this.xdr){if(this.removeAllListeners(),f.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,a)try{this.xdr.abort()}catch(a){}this.unloadRef=this.xdr=null}},c.prototype.close=function(){i("close"),this._cleanup(!0)},c.enabled=!(!b.XDomainRequest||!g.hasDomain()),module.exports=c}).call(this,{env:{}},"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/browser":44,"../../utils/event":46,"../../utils/url":52,debug:54,events:3,inherits:57}],35:[function(require,module,exports){"use strict";function a(a,b,d,e){c.call(this,a,b,d,e)}var b=require("inherits"),c=require("../driver/xhr");b(a,c),a.enabled=c.enabled&&c.supportsCORS,module.exports=a},{"../driver/xhr":17,inherits:57}],36:[function(require,module,exports){"use strict";function a(){var c=this;b.call(this),this.to=setTimeout(function(){c.emit("finish",200,"{}")},a.timeout)}var b=require("events").EventEmitter;require("inherits")(a,b),a.prototype.close=function(){clearTimeout(this.to)},a.timeout=2e3,module.exports=a},{events:3,inherits:57}],37:[function(require,module,exports){"use strict";function a(a,b,d){c.call(this,a,b,d,{noCredentials:!0})}var b=require("inherits"),c=require("../driver/xhr");b(a,c),a.enabled=c.enabled,module.exports=a},{"../driver/xhr":17,inherits:57}],38:[function(require,module,exports){(function(a){"use strict";function b(a,e,i){if(!b.enabled())throw new Error("Transport created when disabled");f.call(this),h("constructor",a);var j=this,k=d.addPath(a,"/websocket");k="https"===k.slice(0,5)?"wss"+k.slice(5):"ws"+k.slice(4),this.url=k,this.ws=new g(this.url,[],i),this.ws.onmessage=function(a){h("message event",a.data),j.emit("message",a.data)},this.unloadRef=c.unloadAdd(function(){h("unload"),j.ws.close()}),this.ws.onclose=function(a){h("close event",a.code,a.reason),j.emit("close",a.code,a.reason),j._cleanup()},this.ws.onerror=function(a){h("error event",a),j.emit("close",1006,"WebSocket connection broken"),j._cleanup()}}var c=require("../utils/event"),d=require("../utils/url"),e=require("inherits"),f=require("events").EventEmitter,g=require("./driver/websocket"),h=function(){};"production"!==a.env.NODE_ENV&&(h=require("debug")("sockjs-client:websocket")),e(b,f),b.prototype.send=function(a){var b="["+a+"]";h("send",b),this.ws.send(b)},b.prototype.close=function(){h("close"),this.ws&&this.ws.close(),this._cleanup()},b.prototype._cleanup=function(){h("_cleanup");var a=this.ws;a&&(a.onmessage=a.onclose=a.onerror=null),c.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},b.enabled=function(){return h("enabled"),!!g},b.transportName="websocket",b.roundTrips=2,module.exports=b}).call(this,{env:{}})},{"../utils/event":46,"../utils/url":52,"./driver/websocket":19,debug:54,events:3,inherits:57}],39:[function(require,module,exports){"use strict";function a(a){if(!f.enabled)throw new Error("Transport created when disabled");c.call(this,a,"/xhr",e,f)}var b=require("inherits"),c=require("./lib/ajax-based"),d=require("./xdr-streaming"),e=require("./receiver/xhr"),f=require("./sender/xdr");b(a,c),a.enabled=d.enabled,a.transportName="xdr-polling",a.roundTrips=2,module.exports=a},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,"./xdr-streaming":40,inherits:57}],40:[function(require,module,exports){"use strict";function a(a){if(!e.enabled)throw new Error("Transport created when disabled");c.call(this,a,"/xhr_streaming",d,e)}var b=require("inherits"),c=require("./lib/ajax-based"),d=require("./receiver/xhr"),e=require("./sender/xdr");b(a,c),a.enabled=function(a){return!a.cookie_needed&&!a.nullOrigin&&(e.enabled&&a.sameScheme)},a.transportName="xdr-streaming",a.roundTrips=2,module.exports=a},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xdr":34,inherits:57}],41:[function(require,module,exports){"use strict";function a(a){if(!f.enabled&&!e.enabled)throw new Error("Transport created when disabled");c.call(this,a,"/xhr",d,e)}var b=require("inherits"),c=require("./lib/ajax-based"),d=require("./receiver/xhr"),e=require("./sender/xhr-cors"),f=require("./sender/xhr-local");b(a,c),a.enabled=function(a){return!a.nullOrigin&&(!(!f.enabled||!a.sameOrigin)||e.enabled)},a.transportName="xhr-polling",a.roundTrips=2,module.exports=a},{"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,inherits:57}],42:[function(require,module,exports){(function(a){"use strict";function b(a){if(!g.enabled&&!f.enabled)throw new Error("Transport created when disabled");d.call(this,a,"/xhr_streaming",e,f)}var c=require("inherits"),d=require("./lib/ajax-based"),e=require("./receiver/xhr"),f=require("./sender/xhr-cors"),g=require("./sender/xhr-local"),h=require("../utils/browser");c(b,d),b.enabled=function(a){return!a.nullOrigin&&(!h.isOpera()&&f.enabled)},b.transportName="xhr-streaming",b.roundTrips=2,b.needBody=!!a.document,module.exports=b}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/browser":44,"./lib/ajax-based":24,"./receiver/xhr":32,"./sender/xhr-cors":35,"./sender/xhr-local":37,inherits:57}],43:[function(require,module,exports){(function(a){"use strict";a.crypto&&a.crypto.getRandomValues?module.exports.randomBytes=function(b){var c=new Uint8Array(b);return a.crypto.getRandomValues(c),c}:module.exports.randomBytes=function(a){for(var b=new Array(a),c=0;c<a;c++)b[c]=Math.floor(256*Math.random());return b}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],44:[function(require,module,exports){(function(a){"use strict";module.exports={isOpera:function(){return a.navigator&&/opera/i.test(a.navigator.userAgent)},isKonqueror:function(){return a.navigator&&/konqueror/i.test(a.navigator.userAgent)},hasDomain:function(){if(!a.document)return!0;try{return!!a.document.domain}catch(a){return!1}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],45:[function(require,module,exports){"use strict";var a,b=require("json3"),c=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,d=function(a){var b,c={},d=[];for(b=0;b<65536;b++)d.push(String.fromCharCode(b));return a.lastIndex=0,d.join("").replace(a,function(a){return c[a]="\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4),""}),a.lastIndex=0,c};module.exports={quote:function(e){var f=b.stringify(e);return c.lastIndex=0,c.test(f)?(a||(a=d(c)),f.replace(c,function(b){return a[b]})):f}}},{json3:58}],46:[function(require,module,exports){(function(a){"use strict";var b=require("./random"),c={},d=!1,e=a.chrome&&a.chrome.app&&a.chrome.app.runtime;module.exports={attachEvent:function(b,c){void 0!==a.addEventListener?a.addEventListener(b,c,!1):a.document&&a.attachEvent&&(a.document.attachEvent("on"+b,c),a.attachEvent("on"+b,c))},detachEvent:function(b,c){void 0!==a.addEventListener?a.removeEventListener(b,c,!1):a.document&&a.detachEvent&&(a.document.detachEvent("on"+b,c),a.detachEvent("on"+b,c))},unloadAdd:function(a){if(e)return null;var f=b.string(8);return c[f]=a,d&&setTimeout(this.triggerUnloadCallbacks,0),f},unloadDel:function(a){a in c&&delete c[a]},triggerUnloadCallbacks:function(){for(var a in c)c[a](),delete c[a]}};var f=function(){d||(d=!0,module.exports.triggerUnloadCallbacks())};e||module.exports.attachEvent("unload",f)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./random":50}],47:[function(require,module,exports){(function(a,b){"use strict";var c=require("./event"),d=require("json3"),e=require("./browser"),f=function(){};"production"!==a.env.NODE_ENV&&(f=require("debug")("sockjs-client:utils:iframe")),module.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){module.exports.WPrefix in b||(b[module.exports.WPrefix]={})},postMessage:function(a,c){b.parent!==b?b.parent.postMessage(d.stringify({windowId:module.exports.currentWindowId,type:a,data:c||""}),"*"):f("Cannot postMessage, no parent window.",a,c)},createIframe:function(a,d){var e,g,h=b.document.createElement("iframe"),i=function(){f("unattach"),clearTimeout(e);try{h.onload=null}catch(a){}h.onerror=null},j=function(){f("cleanup"),h&&(i(),setTimeout(function(){h&&h.parentNode.removeChild(h),h=null},0),c.unloadDel(g))},k=function(a){f("onerror",a),h&&(j(),d(a))},l=function(a,b){f("post",a,b);try{setTimeout(function(){h&&h.contentWindow&&h.contentWindow.postMessage(a,b)},0)}catch(a){}};return h.src=a,h.style.display="none",h.style.position="absolute",h.onerror=function(){k("onerror")},h.onload=function(){f("onload"),clearTimeout(e),e=setTimeout(function(){k("onload timeout")},2e3)},b.document.body.appendChild(h),e=setTimeout(function(){k("timeout")},15e3),g=c.unloadAdd(j),{post:l,cleanup:j,loaded:i}},createHtmlfile:function(a,d){var e,g,h,i=["Active"].concat("Object").join("X"),j=new b[i]("htmlfile"),k=function(){clearTimeout(e),h.onerror=null},l=function(){j&&(k(),c.unloadDel(g),h.parentNode.removeChild(h),h=j=null,CollectGarbage())},m=function(a){f("onerror",a),j&&(l(),d(a))},n=function(a,b){try{setTimeout(function(){h&&h.contentWindow&&h.contentWindow.postMessage(a,b)},0)}catch(a){}};j.open(),j.write('<html><script>document.domain="'+b.document.domain+'";<\/script></html>'),j.close(),j.parentWindow[module.exports.WPrefix]=b[module.exports.WPrefix];var o=j.createElement("div");return j.body.appendChild(o),h=j.createElement("iframe"),o.appendChild(h),h.src=a,h.onerror=function(){m("onerror")},e=setTimeout(function(){m("timeout")},15e3),g=c.unloadAdd(l),{post:n,cleanup:l,loaded:k}}},module.exports.iframeEnabled=!1,b.document&&(module.exports.iframeEnabled=("function"==typeof b.postMessage||"object"==typeof b.postMessage)&&!e.isKonqueror())}).call(this,{env:{}},"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./browser":44,"./event":46,debug:54,json3:58}],48:[function(require,module,exports){(function(a){"use strict";var b={};["log","debug","warn"].forEach(function(c){var d;try{d=a.console&&a.console[c]&&a.console[c].apply}catch(a){}b[c]=d?function(){return a.console[c].apply(a.console,arguments)}:"log"===c?function(){}:b.log}),module.exports=b}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],49:[function(require,module,exports){"use strict";module.exports={isObject:function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},extend:function(a){if(!this.isObject(a))return a;for(var b,c,d=1,e=arguments.length;d<e;d++){b=arguments[d];for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}return a}}},{}],50:[function(require,module,exports){"use strict";var a=require("crypto"),b="abcdefghijklmnopqrstuvwxyz012345";module.exports={string:function(c){for(var d=b.length,e=a.randomBytes(c),f=[],g=0;g<c;g++)f.push(b.substr(e[g]%d,1));return f.join("")},number:function(a){return Math.floor(Math.random()*a)},numberString:function(a){var b=(""+(a-1)).length;return(new Array(b+1).join("0")+this.number(a)).slice(-b)}}},{crypto:43}],51:[function(require,module,exports){(function(a){"use strict";var b=function(){};"production"!==a.env.NODE_ENV&&(b=require("debug")("sockjs-client:utils:transport")),module.exports=function(a){return{filterToEnabled:function(c,d){var e={main:[],facade:[]};return c?"string"==typeof c&&(c=[c]):c=[],a.forEach(function(a){if(a)return"websocket"===a.transportName&&!1===d.websocket?void b("disabled from server","websocket"):c.length&&-1===c.indexOf(a.transportName)?void b("not in whitelist",a.transportName):void(a.enabled(d)?(b("enabled",a.transportName),e.main.push(a),a.facadeTransport&&e.facade.push(a.facadeTransport)):b("disabled",a.transportName))}),e}}}}).call(this,{env:{}})},{debug:54}],52:[function(require,module,exports){(function(a){"use strict";var b=require("url-parse"),c=function(){};"production"!==a.env.NODE_ENV&&(c=require("debug")("sockjs-client:utils:url")),module.exports={getOrigin:function(a){if(!a)return null;var c=new b(a);if("file:"===c.protocol)return null;var d=c.port;return d||(d="https:"===c.protocol?"443":"80"),c.protocol+"//"+c.hostname+":"+d},isOriginEqual:function(a,b){var d=this.getOrigin(a)===this.getOrigin(b);return c("same",a,b,d),d},isSchemeEqual:function(a,b){return a.split(":")[0]===b.split(":")[0]},addPath:function(a,b){var c=a.split("?");return c[0]+b+(c[1]?"?"+c[1]:"")},addQuery:function(a,b){return a+(-1===a.indexOf("?")?"?"+b:"&"+b)}}}).call(this,{env:{}})},{debug:54,"url-parse":59}],53:[function(require,module,exports){module.exports="1.1.1"},{}],54:[function(require,module,exports){function a(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function b(){var a=arguments,b=this.useColors;if(a[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+a[0]+(b?"%c ":" ")+"+"+exports.humanize(this.diff),!b)return a;var c="color: "+this.color;a=[a[0],c,"color: inherit"].concat(Array.prototype.slice.call(a,1));var d=0,e=0;return a[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(d++,"%c"===a&&(e=d))}),a.splice(e,0,c),a}function c(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function d(a){try{null==a?exports.storage.removeItem("debug"):exports.storage.debug=a}catch(a){}}function e(){var a;try{a=exports.storage.debug}catch(a){}return a}exports=module.exports=require("./debug"),exports.log=c,exports.formatArgs=b,exports.save=d,exports.load=e,exports.useColors=a,exports.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(a){}}(),exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],exports.formatters.j=function(a){return JSON.stringify(a)},exports.enable(e())},{"./debug":55}],55:[function(require,module,exports){function a(){return exports.colors[h++%exports.colors.length]}function b(b){function c(){}function d(){var b=d,c=+new Date,e=c-(g||c);b.diff=e,b.prev=g,b.curr=c,g=c,null==b.useColors&&(b.useColors=exports.useColors()),null==b.color&&b.useColors&&(b.color=a());var f=Array.prototype.slice.call(arguments);f[0]=exports.coerce(f[0]),"string"!=typeof f[0]&&(f=["%o"].concat(f));var h=0;f[0]=f[0].replace(/%([a-z%])/g,function(a,c){if("%%"===a)return a;h++;var d=exports.formatters[c];if("function"==typeof d){var e=f[h];a=d.call(b,e),f.splice(h,1),h--}return a}),"function"==typeof exports.formatArgs&&(f=exports.formatArgs.apply(b,f)),(d.log||exports.log||console.log.bind(console)).apply(b,f)}c.enabled=!1,d.enabled=!0;var e=exports.enabled(b)?d:c;return e.namespace=b,e}function c(a){exports.save(a);for(var b=(a||"").split(/[\s,]+/),c=b.length,d=0;d<c;d++)b[d]&&(a=b[d].replace(/\*/g,".*?"),"-"===a[0]?exports.skips.push(new RegExp("^"+a.substr(1)+"$")):exports.names.push(new RegExp("^"+a+"$")))}function d(){exports.enable("")}function e(a){var b,c;for(b=0,c=exports.skips.length;b<c;b++)if(exports.skips[b].test(a))return!1;for(b=0,c=exports.names.length;b<c;b++)if(exports.names[b].test(a))return!0;return!1}function f(a){return a instanceof Error?a.stack||a.message:a}exports=module.exports=b,exports.coerce=f,exports.disable=d,exports.enable=c,exports.enabled=e,exports.humanize=require("ms"),exports.names=[],exports.skips=[],exports.formatters={};var g,h=0},{ms:56}],56:[function(require,module,exports){function a(a){if(a=""+a,!(a.length>1e4)){var b=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(a);if(b){var c=parseFloat(b[1]);switch((b[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*i;case"days":case"day":case"d":return c*h;case"hours":case"hour":case"hrs":case"hr":case"h":return c*g;case"minutes":case"minute":case"mins":case"min":case"m":return c*f;case"seconds":case"second":case"secs":case"sec":case"s":return c*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c}}}}function b(a){return a>=h?Math.round(a/h)+"d":a>=g?Math.round(a/g)+"h":a>=f?Math.round(a/f)+"m":a>=e?Math.round(a/e)+"s":a+"ms"}function c(a){return d(a,h,"day")||d(a,g,"hour")||d(a,f,"minute")||d(a,e,"second")||a+" ms"}function d(a,b,c){if(!(a<b))return a<1.5*b?Math.floor(a/b)+" "+c:Math.ceil(a/b)+" "+c+"s"}var e=1e3,f=60*e,g=60*f,h=24*g,i=365.25*h;module.exports=function(d,e){return e=e||{},"string"==typeof d?a(d):e.long?c(d):b(d)}},{}],57:[function(require,module,exports){"function"==typeof Object.create?module.exports=function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],58:[function(require,module,exports){(function(b){(function(){function c(a,exports){function b(a){if(b[a]!==p)return b[a];var c;if("bug-string-char-index"==a)c="a"!="a"[0];else if("json"==a)c=b("json-stringify")&&b("json-parse");else{var e,g='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==a){var h=exports.stringify,j="function"==typeof h&&s;if(j){(e=function(){return 1}).toJSON=e;try{j="0"===h(0)&&"0"===h(new d)&&'""'==h(new f)&&h(r)===p&&h(p)===p&&h()===p&&"1"===h(e)&&"[1]"==h([e])&&"[null]"==h([p])&&"null"==h(null)&&"[null,null,null]"==h([p,r,null])&&h({a:[e,!0,!1,null,"\0\b\n\f\r\t"]})==g&&"1"===h(null,e)&&"[\n 1,\n 2\n]"==h([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==h(new i(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==h(new i(864e13))&&'"-000001-01-01T00:00:00.000Z"'==h(new i(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==h(new i(-1))}catch(a){j=!1}}c=j}if("json-parse"==a){var k=exports.parse;if("function"==typeof k)try{if(0===k("0")&&!k(!1)){e=k(g);var l=5==e.a.length&&1===e.a[0];if(l){try{l=!k('"\t"')}catch(a){}if(l)try{l=1!==k("01")}catch(a){}if(l)try{l=1!==k("1.")}catch(a){}}}}catch(a){l=!1}c=l}}return b[a]=!!c}a||(a=g.Object()),exports||(exports=g.Object());var d=a.Number||g.Number,f=a.String||g.String,h=a.Object||g.Object,i=a.Date||g.Date,j=a.SyntaxError||g.SyntaxError,k=a.TypeError||g.TypeError,l=a.Math||g.Math,m=a.JSON||g.JSON;"object"==typeof m&&m&&(exports.stringify=m.stringify,exports.parse=m.parse);var n,o,p,q=h.prototype,r=q.toString,s=new i(-0xc782b5b800cec);try{s=-109252==s.getUTCFullYear()&&0===s.getUTCMonth()&&1===s.getUTCDate()&&10==s.getUTCHours()&&37==s.getUTCMinutes()&&6==s.getUTCSeconds()&&708==s.getUTCMilliseconds()}catch(a){}if(!b("json")){var t=b("bug-string-char-index");if(!s)var u=l.floor,v=[0,31,59,90,120,151,181,212,243,273,304,334],w=function(a,b){return v[b]+365*(a-1970)+u((a-1969+(b=+(b>1)))/4)-u((a-1901+b)/100)+u((a-1601+b)/400)};if((n=q.hasOwnProperty)||(n=function(a){var b,c={};return(c.__proto__=null,c.__proto__={toString:1},c).toString!=r?n=function(a){var b=this.__proto__,c=a in(this.__proto__=null,this);return this.__proto__=b,c}:(b=c.constructor,n=function(a){var c=(this.constructor||b).prototype;return a in this&&!(a in c&&this[a]===c[a])}),c=null,n.call(this,a)}),o=function(a,b){var c,d,f,g=0;(c=function(){this.valueOf=0}).prototype.valueOf=0,d=new c;for(f in d)n.call(d,f)&&g++;return c=d=null,g?o=2==g?function(a,b){var c,d={},e="[object Function]"==r.call(a);for(c in a)e&&"prototype"==c||n.call(d,c)||!(d[c]=1)||!n.call(a,c)||b(c)}:function(a,b){var c,d,e="[object Function]"==r.call(a);for(c in a)e&&"prototype"==c||!n.call(a,c)||(d="constructor"===c)||b(c);(d||n.call(a,c="constructor"))&&b(c)}:(d=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],o=function(a,b){var c,f,g="[object Function]"==r.call(a),h=!g&&"function"!=typeof a.constructor&&e[typeof a.hasOwnProperty]&&a.hasOwnProperty||n;for(c in a)g&&"prototype"==c||!h.call(a,c)||b(c);for(f=d.length;c=d[--f];h.call(a,c)&&b(c));}),o(a,b)},!b("json-stringify")){var x={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},y=function(a,b){return("000000"+(b||0)).slice(-a)},z=function(a){for(var b='"',c=0,d=a.length,e=!t||d>10,f=e&&(t?a.split(""):a);c<d;c++){var g=a.charCodeAt(c);switch(g){case 8:case 9:case 10:case 12:case 13:case 34:case 92:b+=x[g];break;default:if(g<32){b+="\\u00"+y(2,g.toString(16));break}b+=e?f[c]:a.charAt(c)}}return b+'"'},A=function(a,b,c,d,e,f,g){var h,i,j,l,m,q,s,t,v,x,B,C,D,E,F,G;try{h=b[a]}catch(a){}if("object"==typeof h&&h)if("[object Date]"!=(i=r.call(h))||n.call(h,"toJSON"))"function"==typeof h.toJSON&&("[object Number]"!=i&&"[object String]"!=i&&"[object Array]"!=i||n.call(h,"toJSON"))&&(h=h.toJSON(a));else if(h>-1/0&&h<1/0){if(w){for(m=u(h/864e5),j=u(m/365.2425)+1970-1;w(j+1,0)<=m;j++);for(l=u((m-w(j,0))/30.42);w(j,l+1)<=m;l++);m=1+m-w(j,l),q=(h%864e5+864e5)%864e5,s=u(q/36e5)%24,t=u(q/6e4)%60,v=u(q/1e3)%60,x=q%1e3}else j=h.getUTCFullYear(),l=h.getUTCMonth(),m=h.getUTCDate(),s=h.getUTCHours(),t=h.getUTCMinutes(),v=h.getUTCSeconds(),x=h.getUTCMilliseconds();h=(j<=0||j>=1e4?(j<0?"-":"+")+y(6,j<0?-j:j):y(4,j))+"-"+y(2,l+1)+"-"+y(2,m)+"T"+y(2,s)+":"+y(2,t)+":"+y(2,v)+"."+y(3,x)+"Z"}else h=null;if(c&&(h=c.call(b,a,h)),null===h)return"null";if("[object Boolean]"==(i=r.call(h)))return""+h
;if("[object Number]"==i)return h>-1/0&&h<1/0?""+h:"null";if("[object String]"==i)return z(""+h);if("object"==typeof h){for(E=g.length;E--;)if(g[E]===h)throw k();if(g.push(h),B=[],F=f,f+=e,"[object Array]"==i){for(D=0,E=h.length;D<E;D++)C=A(D,h,c,d,e,f,g),B.push(C===p?"null":C);G=B.length?e?"[\n"+f+B.join(",\n"+f)+"\n"+F+"]":"["+B.join(",")+"]":"[]"}else o(d||h,function(a){var b=A(a,h,c,d,e,f,g);b!==p&&B.push(z(a)+":"+(e?" ":"")+b)}),G=B.length?e?"{\n"+f+B.join(",\n"+f)+"\n"+F+"}":"{"+B.join(",")+"}":"{}";return g.pop(),G}};exports.stringify=function(a,b,c){var d,f,g,h;if(e[typeof b]&&b)if("[object Function]"==(h=r.call(b)))f=b;else if("[object Array]"==h){g={};for(var i,j=0,k=b.length;j<k;i=b[j++],("[object String]"==(h=r.call(i))||"[object Number]"==h)&&(g[i]=1));}if(c)if("[object Number]"==(h=r.call(c))){if((c-=c%1)>0)for(d="",c>10&&(c=10);d.length<c;d+=" ");}else"[object String]"==h&&(d=c.length<=10?c:c.slice(0,10));return A("",(i={},i[""]=a,i),f,g,d,"",[])}}if(!b("json-parse")){var B,C,D=f.fromCharCode,E={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},F=function(){throw B=C=null,j()},G=function(){for(var a,b,c,d,e,f=C,g=f.length;B<g;)switch(e=f.charCodeAt(B)){case 9:case 10:case 13:case 32:B++;break;case 123:case 125:case 91:case 93:case 58:case 44:return a=t?f.charAt(B):f[B],B++,a;case 34:for(a="@",B++;B<g;)if((e=f.charCodeAt(B))<32)F();else if(92==e)switch(e=f.charCodeAt(++B)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:a+=E[e],B++;break;case 117:for(b=++B,c=B+4;B<c;B++)(e=f.charCodeAt(B))>=48&&e<=57||e>=97&&e<=102||e>=65&&e<=70||F();a+=D("0x"+f.slice(b,B));break;default:F()}else{if(34==e)break;for(e=f.charCodeAt(B),b=B;e>=32&&92!=e&&34!=e;)e=f.charCodeAt(++B);a+=f.slice(b,B)}if(34==f.charCodeAt(B))return B++,a;F();default:if(b=B,45==e&&(d=!0,e=f.charCodeAt(++B)),e>=48&&e<=57){for(48==e&&(e=f.charCodeAt(B+1))>=48&&e<=57&&F(),d=!1;B<g&&(e=f.charCodeAt(B))>=48&&e<=57;B++);if(46==f.charCodeAt(B)){for(c=++B;c<g&&(e=f.charCodeAt(c))>=48&&e<=57;c++);c==B&&F(),B=c}if(101==(e=f.charCodeAt(B))||69==e){for(e=f.charCodeAt(++B),43!=e&&45!=e||B++,c=B;c<g&&(e=f.charCodeAt(c))>=48&&e<=57;c++);c==B&&F(),B=c}return+f.slice(b,B)}if(d&&F(),"true"==f.slice(B,B+4))return B+=4,!0;if("false"==f.slice(B,B+5))return B+=5,!1;if("null"==f.slice(B,B+4))return B+=4,null;F()}return"$"},H=function(a){var b,c;if("$"==a&&F(),"string"==typeof a){if("@"==(t?a.charAt(0):a[0]))return a.slice(1);if("["==a){for(b=[];"]"!=(a=G());c||(c=!0))c&&(","==a?"]"==(a=G())&&F():F()),","==a&&F(),b.push(H(a));return b}if("{"==a){for(b={};"}"!=(a=G());c||(c=!0))c&&(","==a?"}"==(a=G())&&F():F()),","!=a&&"string"==typeof a&&"@"==(t?a.charAt(0):a[0])&&":"==G()||F(),b[a.slice(1)]=H(G());return b}F()}return a},I=function(a,b,c){var d=J(a,b,c);d===p?delete a[b]:a[b]=d},J=function(a,b,c){var d,e=a[b];if("object"==typeof e&&e)if("[object Array]"==r.call(e))for(d=e.length;d--;)I(e,d,c);else o(e,function(a){I(e,a,c)});return c.call(a,b,e)};exports.parse=function(a,b){var c,d;return B=0,C=""+a,c=H(G()),"$"!=G()&&F(),B=C=null,b&&"[object Function]"==r.call(b)?J((d={},d[""]=c,d),"",b):c}}}return exports.runInContext=c,exports}var d="function"==typeof a&&a.amd,e={function:!0,object:!0},f=e[typeof exports]&&exports&&!exports.nodeType&&exports,g=e[typeof window]&&window||this,h=f&&e[typeof module]&&module&&!module.nodeType&&"object"==typeof b&&b;if(!h||h.global!==h&&h.window!==h&&h.self!==h||(g=h),f&&!d)c(g,f);else{var i=g.JSON,j=g.JSON3,k=!1,l=c(g,g.JSON3={noConflict:function(){return k||(k=!0,g.JSON=i,g.JSON3=j,i=j=null),l}});g.JSON={parse:l.parse,stringify:l.stringify}}d&&a(function(){return l})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],59:[function(require,module,exports){"use strict";function a(a){var b=g.exec(a);return{protocol:b[1]?b[1].toLowerCase():"",slashes:!!b[2],rest:b[3]?b[3]:""}}function b(g,i,j){if(!(this instanceof b))return new b(g,i,j);var k,l,m,n,o=f.test(g),p=typeof i,q=this,r=0;"object"!==p&&"string"!==p&&(j=i,i=null),j&&"function"!=typeof j&&(j=e.parse),i=d(i);var s=a(g);for(q.protocol=s.protocol||i.protocol||"",q.slashes=s.slashes||i.slashes,g=s.rest;r<h.length;r++)l=h[r],k=l[0],n=l[1],k!==k?q[n]=g:"string"==typeof k?~(m=g.indexOf(k))&&("number"==typeof l[2]?(q[n]=g.slice(0,m),g=g.slice(m+l[2])):(q[n]=g.slice(m),g=g.slice(0,m))):(m=k.exec(g))&&(q[n]=m[1],g=g.slice(0,g.length-m[0].length)),q[n]=q[n]||(l[3]||"port"===n&&o?i[n]||"":""),l[4]&&(q[n]=q[n].toLowerCase());j&&(q.query=j(q.query)),c(q.port,q.protocol)||(q.host=q.hostname,q.port=""),q.username=q.password="",q.auth&&(l=q.auth.split(":"),q.username=l[0]||"",q.password=l[1]||""),q.href=q.toString()}var c=require("requires-port"),d=require("./lolcation"),e=require("querystringify"),f=/^\/(?!\/)/,g=/^([a-z0-9.+-]+:)?(\/\/)?(.*)$/i,h=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/\:(\d+)$/,"port"],[NaN,"hostname",void 0,1,1]];b.prototype.set=function(a,b,d){var f=this;return"query"===a?("string"==typeof b&&b.length&&(b=(d||e.parse)(b)),f[a]=b):"port"===a?(f[a]=b,c(b,f.protocol)?b&&(f.host=f.hostname+":"+b):(f.host=f.hostname,f[a]="")):"hostname"===a?(f[a]=b,f.port&&(b+=":"+f.port),f.host=b):"host"===a?(f[a]=b,/\:\d+/.test(b)&&(b=b.split(":"),f.hostname=b[0],f.port=b[1])):"protocol"===a?(f.protocol=b,f.slashes=!d):f[a]=b,f.href=f.toString(),f},b.prototype.toString=function(a){a&&"function"==typeof a||(a=e.stringify);var b,c=this,d=c.protocol;d&&":"!==d.charAt(d.length-1)&&(d+=":");var f=d+(c.slashes?"//":"");return c.username&&(f+=c.username,c.password&&(f+=":"+c.password),f+="@"),f+=c.hostname,c.port&&(f+=":"+c.port),f+=c.pathname,b="object"==typeof c.query?a(c.query):c.query,b&&(f+="?"!==b.charAt(0)?"?"+b:b),c.hash&&(f+=c.hash),f},b.qs=e,b.location=d,module.exports=b},{"./lolcation":60,querystringify:61,"requires-port":62}],60:[function(require,module,exports){(function(a){"use strict";var b,c=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,d={hash:1,query:1};module.exports=function(e){e=e||a.location||{},b=b||require("./");var f,g={},h=typeof e;if("blob:"===e.protocol)g=new b(unescape(e.pathname),{});else if("string"===h){g=new b(e,{});for(f in d)delete g[f]}else if("object"===h){for(f in e)f in d||(g[f]=e[f]);void 0===g.slashes&&(g.slashes=c.test(e.href))}return g}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./":59}],61:[function(require,module,exports){"use strict";function a(a){for(var b,c=/([^=?&]+)=([^&]*)/g,d={};b=c.exec(a);d[decodeURIComponent(b[1])]=decodeURIComponent(b[2]));return d}function b(a,b){b=b||"";var d=[];"string"!=typeof b&&(b="?");for(var e in a)c.call(a,e)&&d.push(encodeURIComponent(e)+"="+encodeURIComponent(a[e]));return d.length?b+d.join("&"):""}var c=Object.prototype.hasOwnProperty;exports.stringify=b,exports.parse=a},{}],62:[function(require,module,exports){"use strict";module.exports=function(a,b){if(b=b.split(":")[0],!(a=+a))return!1;switch(b){case"http":case"ws":return 80!==a;case"https":case"wss":return 443!==a;case"ftp":return 21!==a;case"gopher":return 70!==a;case"file":return!1}return 0!==a}},{}]},{},[1])(1)});